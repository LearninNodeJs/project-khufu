{"version":3,"file":"VTimePicker.js","sourceRoot":"","sources":["../../../src/components/VTimePicker/VTimePicker.js"],"names":[],"mappings":"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","sourcesContent":["// Components\nimport VTimePickerTitle from './VTimePickerTitle'\nimport VTimePickerClock from './VTimePickerClock'\n\n// Mixins\nimport Picker from '../../mixins/picker'\n\n// Utils\nimport { createRange } from '../../util/helpers'\nimport pad from '../VDatePicker/util/pad'\n\nconst rangeHours24 = createRange(24)\nconst rangeHours12am = createRange(12)\nconst rangeHours12pm = rangeHours12am.map(v => v + 12)\nconst rangeMinutes = createRange(60)\n\nexport default {\n  name: 'v-time-picker',\n\n  mixins: [Picker],\n\n  data () {\n    return {\n      inputHour: null,\n      inputMinute: null,\n      period: 'am',\n      selectingHour: true\n    }\n  },\n\n  props: {\n    allowedHours: Function,\n    allowedMinutes: Function,\n    format: {\n      type: String,\n      default: 'ampm',\n      validator (val) {\n        return ['ampm', '24hr'].includes(val)\n      }\n    },\n    min: String,\n    max: String,\n    scrollable: Boolean,\n    value: null\n  },\n\n  computed: {\n    isAllowedHourCb () {\n      if (!this.min && !this.max) return this.allowedHours\n\n      const minHour = this.min ? this.min.split(':')[0] : 0\n      const maxHour = this.max ? this.max.split(':')[0] : 23\n\n      return val => {\n        return val >= minHour * 1 &&\n          val <= maxHour * 1 &&\n          (!this.allowedHours || this.allowedHours(val))\n      }\n    },\n    isAllowedMinuteCb () {\n      const isHourAllowed = !this.allowedHours || this.allowedHours(this.inputHour)\n      if (!this.min && !this.max) {\n        return isHourAllowed ? this.allowedMinutes : () => false\n      }\n\n      const [minHour, minMinute] = this.min ? this.min.split(':') : [0, 0]\n      const [maxHour, maxMinute] = this.max ? this.max.split(':') : [23, 59]\n      const minTime = minHour * 60 + minMinute * 1\n      const maxTime = maxHour * 60 + maxMinute * 1\n\n      return val => {\n        const time = 60 * this.inputHour + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isHourAllowed &&\n          (!this.allowedMinutes || this.allowedMinutes(val))\n      }\n    },\n    isAmPm () {\n      return this.format === 'ampm'\n    }\n  },\n\n  watch: {\n    value: 'setInputData'\n  },\n\n  methods: {\n    emitValue () {\n      if (this.inputHour != null && this.inputMinute != null) {\n        this.$emit('input', `${pad(this.inputHour)}:${pad(this.inputMinute)}`)\n      }\n    },\n    setPeriod (period) {\n      this.period = period\n      if (this.inputHour != null) {\n        const newHour = this.inputHour + (period === 'am' ? -12 : 12)\n        this.inputHour = this.firstAllowed('hour', newHour)\n        this.emitValue()\n      }\n    },\n    setInputData (value) {\n      if (value == null) {\n        this.inputHour = null\n        this.inputMinute = null\n        return\n      }\n\n      if (value instanceof Date) {\n        this.inputHour = value.getHours()\n        this.inputMinute = value.getMinutes()\n      } else {\n        const [, hour, minute, , period] = value.trim().toLowerCase().match(/^(\\d+):(\\d+)(:\\d+)?([ap]m)?$/, '') || []\n\n        this.inputHour = period ? this.convert12to24(parseInt(hour, 10), period) : parseInt(hour, 10)\n        this.inputMinute = parseInt(minute, 10)\n      }\n\n      this.period = this.inputHour < 12 ? 'am' : 'pm'\n    },\n    convert24to12 (hour) {\n      return hour ? ((hour - 1) % 12 + 1) : 12\n    },\n    convert12to24 (hour, period) {\n      return hour % 12 + (period === 'pm' ? 12 : 0)\n    },\n    onInput (value) {\n      if (this.selectingHour) {\n        this.inputHour = this.isAmPm ? this.convert12to24(value, this.period) : value\n      } else {\n        this.inputMinute = value\n      }\n      this.emitValue()\n    },\n    onChange () {\n      if (!this.selectingHour) {\n        this.$emit('change', this.value)\n      }\n\n      this.selectingHour = !this.selectingHour\n    },\n    firstAllowed (type, value) {\n      const allowedFn = type === 'hour' ? this.isAllowedHourCb : this.isAllowedMinuteCb\n      if (!allowedFn) return value\n\n      // TODO: clean up\n      const range = type === 'minute'\n        ? rangeMinutes\n        : (this.isAmPm\n          ? (value < 12\n            ? rangeHours12am\n            : rangeHours12pm)\n          : rangeHours24)\n      const first = range.find(v => allowedFn((v + value) % range.length + range[0]))\n      return ((first || 0) + value) % range.length + range[0]\n    },\n    genClock () {\n      return this.$createElement(VTimePickerClock, {\n        props: {\n          allowedValues: this.selectingHour ? this.isAllowedHourCb : this.isAllowedMinuteCb,\n          color: this.color,\n          dark: this.dark,\n          double: this.selectingHour && !this.isAmPm,\n          format: this.selectingHour ? (this.isAmPm ? this.convert24to12 : val => val) : val => pad(val, 2),\n          max: this.selectingHour ? (this.isAmPm && this.period === 'am' ? 11 : 23) : 59,\n          min: this.selectingHour && this.isAmPm && this.period === 'pm' ? 12 : 0,\n          scrollable: this.scrollable,\n          size: this.width - ((!this.fullWidth && this.landscape) ? 80 : 20),\n          step: this.selectingHour ? 1 : 5,\n          value: this.selectingHour ? this.inputHour : this.inputMinute\n        },\n        on: {\n          input: this.onInput,\n          change: this.onChange\n        },\n        ref: 'clock'\n      })\n    },\n    genPickerBody () {\n      return this.$createElement('div', {\n        staticClass: 'v-time-picker-clock__container',\n        style: {\n          width: `${this.width}px`,\n          height: `${this.width - ((!this.fullWidth && this.landscape) ? 60 : 0)}px`\n        },\n        key: this.selectingHour\n      }, [this.genClock()])\n    },\n    genPickerTitle () {\n      return this.$createElement(VTimePickerTitle, {\n        props: {\n          ampm: this.isAmPm,\n          hour: this.inputHour,\n          minute: this.inputMinute,\n          period: this.period,\n          selectingHour: this.selectingHour\n        },\n        on: {\n          'update:selectingHour': value => (this.selectingHour = value),\n          'update:period': this.setPeriod\n        },\n        ref: 'title',\n        slot: 'title'\n      })\n    }\n  },\n\n  mounted () {\n    this.setInputData(this.value)\n  },\n\n  render () {\n    return this.genPicker('v-picker--time')\n  }\n}\n"]}