{"version":3,"file":"VMenu.js","sourceRoot":"","sources":["../../../src/components/VMenu/VMenu.js"],"names":[],"mappings":"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","sourcesContent":["import '../../stylus/components/_menus.styl'\n\n// Mixins\nimport Delayable from '../../mixins/delayable'\nimport Dependent from '../../mixins/dependent'\nimport Detachable from '../../mixins/detachable'\nimport Menuable from '../../mixins/menuable.js'\nimport Returnable from '../../mixins/returnable'\nimport Toggleable from '../../mixins/toggleable'\n\n// Component level mixins\nimport Activator from './mixins/menu-activator'\nimport Generators from './mixins/menu-generators'\nimport Keyable from './mixins/menu-keyable'\nimport Position from './mixins/menu-position'\n\n// Directives\nimport ClickOutside from '../../directives/click-outside'\nimport Resize from '../../directives/resize'\n\nexport default {\n  name: 'v-menu',\n\n  mixins: [\n    Activator,\n    Dependent,\n    Delayable,\n    Detachable,\n    Generators,\n    Keyable,\n    Menuable,\n    Position,\n    Returnable,\n    Toggleable\n  ],\n\n  directives: {\n    ClickOutside,\n    Resize\n  },\n\n  data () {\n    return {\n      defaultOffset: 8,\n      maxHeightAutoDefault: '200px',\n      startIndex: 3,\n      stopIndex: 0,\n      hasJustFocused: false,\n      resizeTimeout: null\n    }\n  },\n\n  props: {\n    auto: Boolean,\n    closeOnClick: {\n      type: Boolean,\n      default: true\n    },\n    closeOnContentClick: {\n      type: Boolean,\n      default: true\n    },\n    disabled: Boolean,\n    fullWidth: Boolean,\n    maxHeight: { default: 'auto' },\n    offsetX: Boolean,\n    offsetY: Boolean,\n    openOnClick: {\n      type: Boolean,\n      default: true\n    },\n    openOnHover: Boolean,\n    origin: {\n      type: String,\n      default: 'top left'\n    },\n    transition: {\n      type: [Boolean, String],\n      default: 'v-menu-transition'\n    }\n  },\n\n  computed: {\n    calculatedLeft () {\n      if (!this.auto) return this.calcLeft()\n\n      return `${this.calcXOverflow(this.calcLeftAuto())}px`\n    },\n    calculatedMaxHeight () {\n      return this.auto\n        ? '200px'\n        : isNaN(this.maxHeight)\n          ? this.maxHeight\n          : `${this.maxHeight}px`\n    },\n    calculatedMaxWidth () {\n      return isNaN(this.maxWidth)\n        ? this.maxWidth\n        : `${this.maxWidth}px`\n    },\n    calculatedMinWidth () {\n      if (this.minWidth) {\n        return isNaN(this.minWidth)\n          ? this.minWidth\n          : `${this.minWidth}px`\n      }\n\n      const minWidth = (\n        this.dimensions.activator.width +\n        this.nudgeWidth +\n        (this.auto ? 16 : 0)\n      )\n\n      const calculatedMaxWidth = isNaN(parseInt(this.calculatedMaxWidth))\n        ? minWidth\n        : parseInt(this.calculatedMaxWidth)\n\n      return `${Math.min(\n        calculatedMaxWidth,\n        minWidth\n      )}px`\n    },\n    calculatedTop () {\n      if (!this.auto || this.isAttached) return this.calcTop()\n\n      return `${this.calcYOverflow(this.calcTopAuto())}px`\n    },\n    styles () {\n      return {\n        maxHeight: this.calculatedMaxHeight,\n        minWidth: this.calculatedMinWidth,\n        maxWidth: this.calculatedMaxWidth,\n        top: this.calculatedTop,\n        left: this.calculatedLeft,\n        transformOrigin: this.origin,\n        zIndex: this.zIndex || this.activeZIndex\n      }\n    },\n    tileHeight () {\n      return this.dense ? 36 : 48\n    }\n  },\n\n  watch: {\n    activator (newActivator, oldActivator) {\n      this.removeActivatorEvents(oldActivator)\n      this.addActivatorEvents(newActivator)\n    },\n    isContentActive (val) {\n      this.hasJustFocused = val\n    }\n  },\n\n  methods: {\n    activate () {\n      // This exists primarily for v-select\n      // helps determine which tiles to activate\n      this.getTiles()\n      // Update coordinates and dimensions of menu\n      // and its activator\n      this.updateDimensions()\n      // Start the transition\n      requestAnimationFrame(this.startTransition)\n      // Once transitioning, calculate scroll position\n      setTimeout(this.calculateScroll, 50)\n    },\n    closeConditional () {\n      return this.isActive && this.closeOnClick\n    },\n    onResize () {\n      if (!this.isActive) return\n\n      // Account for screen resize\n      // and orientation change\n      // eslint-disable-next-line no-unused-expressions\n      this.$refs.content.offsetWidth\n      this.updateDimensions()\n\n      // When resizing to a smaller width\n      // content width is evaluated before\n      // the new activator width has been\n      // set, causing it to not size properly\n      // hacky but will revisit in the future\n      clearTimeout(this.resizeTimeout)\n      this.resizeTimeout = setTimeout(this.updateDimensions, 100)\n    }\n  },\n\n  render (h) {\n    const data = {\n      staticClass: 'v-menu',\n      class: {\n        'v-menu--disabled': this.disabled\n      },\n      style: {\n        display: this.fullWidth ? 'block' : 'inline-block'\n      },\n      directives: [{\n        arg: 500,\n        name: 'resize',\n        value: this.onResize\n      }],\n      on: {\n        keydown: this.changeListIndex\n      }\n    }\n\n    return h('div', data, [\n      this.genActivator(),\n      this.genTransition()\n    ])\n  }\n}\n"]}