{"version":3,"file":"VRangeSlider.js","sourceRoot":"","sources":["../../../src/components/VRangeSlider/VRangeSlider.js"],"names":[],"mappings":";;;;;;AACA,AAAO,AAA6C;;AAGpD,AAAO,AAAO,AAAM,AAAY;;;;AAEhC,AAAO,AACL,AAAW,AACX,AAAS,AACV,AAAM,AAAoB,AAE3B;;;;AARA,AAAa;;AASX,AAAI,UAAE,AAAgB;AAEtB,AAAO,AAAE,AAAO;AAEhB,AAAI;AAAE,AAAE,AAAC,AAAE,AAAC;AACV,AAAW,yBAAE,AAAI;AACjB,AAAS,uBAAE,CAAC,AAAE,GAAC,AAAK,MAAC,AAAM,AACzB,AAAC,SAAC,CAAC,AAAC,GAAE,AAAC,AAAC,AACR,AAAC,KAAC,AAAE,GAAC,AAAK,AACb,AAAC;AALW;;AAOb,AAAK;AACH,AAAK;AACH,AAAI,kBAAE,AAAK;AACX,AAAO;AAAE,AAAG,AAAE,AAAC,uBAAC,AAAE,AAAC,AACpB,AACF;;AAJQ;AADF;AAOP,AAAQ;AACN,AAAO;AACL,0BAAc,AAAM,OAAC,AAAE;AACrB,AAAuB,yCAAE,AAAI,AAC9B;AAFwB,aAAlB,AAAM,EAEV,AAAO,kBAAC,AAAQ,SAAC,AAAO,QAAC,AAAI,KAAC,AAAI,AAAC,AAAC,AACzC;AAAC;;AACD,AAAa;AACX,AAAG;AACD,uBAAO,AAAI,KAAC,AAAS,AACvB;AAAC;AACD,AAAG,8BAAE,AAAG;AACN,AAAM;;oBAAE,AAAG,MAAU,AAAI;oBAAZ,AAAG,AAAE;AAClB,AAA4B;AAC5B,AAA0B;AAC1B,AAAwB;;AACxB,oBAAI,AAAK,YAAO,AAAG;AAAC,AAAC,AAAC,AAAE,2BAAC,AAAI,MAAC,AAAU,WAAC,AAAI,KAAC,AAAG,IAAC,AAAI,KAAC,AAAG,IAAC,AAAC,GAAE,AAAG,AAAC,MAAE,AAAG,AAAC,AAAC,AAAC;iBAA9D,AAAG;AAEf,AAAyC;AACzC,oBAAI,AAAK,MAAC,AAAC,AAAC,KAAG,AAAK,MAAC,AAAC,AAAC,MAAI,AAAK,MAAC,AAAC,AAAC,KAAG,AAAK,MAAC,AAAC,AAAC,IAAE;AAC9C,wBAAI,AAAI,KAAC,AAAW,gBAAK,AAAI,MAAE,AAAI,KAAC,AAAW,cAAG,AAAI,KAAC,AAAW,gBAAK,AAAC,AAAC,AAAC,IAAC,AAAC,AAAC,AAAC,IAAC,AAAC;AAChF,AAAK,4BAAG,CAAC,AAAK,MAAC,AAAC,AAAC,IAAE,AAAK,MAAC,AAAC,AAAC,AAAC;AAC7B;AAED,AAAI,qBAAC,AAAS,YAAG,AAAK;AACtB,oBAAI,CAAC,AAAS,wBAAC,AAAK,OAAE,AAAI,KAAC,AAAK,AAAC,QAAE,AAAI,KAAC,AAAK,MAAC,AAAO,SAAE,AAAK,AAAC;AAE7D,AAAI,qBAAC,AAAQ,AAAE,AACjB;AAAC,AACF;AAtBc;AAuBf,AAAU;;;AACR,wBAAY,AAAa,cAAC,AAAG;AAAC,AAAC,AAAC,AAAE,uBAAC,CACjC,AAAI,OAAC,AAAU,WAAC,AAAC,AAAC,KAAG,AAAI,OAAC,AAAG,AAAC,AAAG,QAAC,AAAI,OAAC,AAAG,MAAG,AAAI,OAAC,AAAG,AAAC,OAAG,AAAG,AAC7D,AACH;aAHS,AAAI;AAGZ;AACD,AAAO;;;AACL,wBAAY,AAAa,cAAC,AAAI;AAAC,AAAC,AAAC,AAAE,uBAAC,AAAC,MAAK,AAAI,OAAC,AAAG,AAAC;aAA5C,AAAI,KAA4C,AAAI,KAAC,AAAW,AACzE;AAAC;AACD,AAAe;AACb,gBAAM,AAAM,SAAG,AAAO,kBAAC,AAAQ,SAAC,AAAe,gBAAC,AAAI,KAAC,AAAI,AAAC;AAC1D,gBAAM,AAAW,cAAG,AAAI,KAAC,AAAG,IAAC,AAAI,KAAC,AAAU,WAAC,AAAC,AAAC,KAAG,AAAI,KAAC,AAAU,WAAC,AAAC,AAAC,AAAC;AAErE,AAAM,mBAAC,AAAK,AAAG,kBAAQ,AAAW,uBAAO,AAAI,KAAC,AAAY,AAAK;AAC/D,AAAM,mBAAC,AAAI,KAAC,AAAQ,SAAC,AAAG,AAAC,AAAC,MAAC,AAAO,AAAC,AAAC,UAAC,AAAM,AAAC,AAAG,UAAG,AAAI,KAAC,AAAU,WAAC,AAAC,AAAC,AAAG;AAEvE,mBAAO,AAAM,AACf;AAAC;AACD,AAAY;AACV,gBAAI,AAAI,KAAC,AAAO,WACd,AAAI,KAAC,AAAa,cAAC,AAAC,AAAC,IACrB,OAAO,AAAC;AAEV,mBAAO,AAAO,kBAAC,AAAQ,SAAC,AAAY,aAAC,AAAI,KAAC,AAAI,AAAC,AACjD;AAAC,AACF;AArDS;AAuDV,AAAO;AACL,AAAsB,gEAAE,AAAG,KAAE,AAAC;AAC5B,gBAAI,AAAI,KAAC,AAAG,IAAC,AAAG,IAAC,AAAC,AAAC,KAAG,AAAC,AAAC,KAAG,AAAI,KAAC,AAAG,IAAC,AAAG,IAAC,AAAC,AAAC,KAAG,AAAC,AAAC,IAAE,OAAO,AAAC,OACpD,OAAO,AAAC,AACf;AAAC;AACD,AAAQ;;;AACN,6CAAmB,AAAC,AAAC,GAAC,AAAG,IAAC,AAAC,AAAC,AAAE;AAC5B,oBAAM,AAAK,QAAG,AAAO,kBAAC,AAAO,QAAC,AAAQ,SAAC,AAAI,AAAC,AAAI,AAAC;AAEjD,AAAK,sBAAC,AAAI,KAAC,AAAK,MAAC,AAAK,QAAG,AAAI,OAAC,AAAa,cAAC,AAAC,AAAC;AAE9C,AAAK,sBAAC,AAAI,KAAC,AAAE,GAAC,AAAK,QAAG,AAAC,AAAC,AAAE;AACxB,AAAI,2BAAC,AAAW,cAAG,AAAC;AACpB,AAAO,sCAAC,AAAO,QAAC,AAAO,QAAC,AAAI,AAAC,AAAI,aAAE,AAAC,AAAC,AACvC;AAAC;AAED,uBAAO,AAAK,AACd;AAAC,AAAC,AACJ,aAZS,AAAW;AAYnB;AACD,AAAW;;;AACT,oBACE,AAAI,KAAC,AAAQ,AAAE,YACf,AAAI,KAAC,AAAiB,AAAE,qBACxB,AAAI,KAAC,AAAQ,AAAE,sCACH,AAAC,AAAC,GAAC,AAAG,IAAC,AAAC,AAAC,AAAE;AACrB,oBAAM,AAAK,QAAG,AAAI,OAAC,AAAa,cAAC,AAAC,AAAC;AACnC,oBAAM,AAAM,SAAG,AAAC,AAAC,AAAE;AACjB,AAAI,2BAAC,AAAQ,WAAG,AAAI;AACpB,AAAI,2BAAC,AAAW,cAAG,AAAC;AACpB,AAAI,2BAAC,AAAgB,iBAAC,AAAC,AAAC,AAC1B;AAAC;AACD,oBAAM,AAAU,aAAG,AAAI,OAAC,AAAU,WAAC,AAAC,AAAC;AACrC,oBAAM,AAAQ,WAAG,CAAC,AAAI,OAAC,AAAS,aAAI,AAAI,OAAC,AAAQ,AAAC,aAAI,AAAI,OAAC,AAAW,gBAAK,AAAC;AAE5E,uBAAO,AAAI,OAAC,AAAiB,kBAAC,AAAK,OAAE,AAAU,YAAE,AAAQ,UAAE,AAAM,AAAC,AACpE;AAAC,AAAC,AACH,AACH,aAbI,AAAW,CAJN;AAiBR;AACD,AAAa,8CAAE,AAAC;AACd,gBAAI,CAAC,AAAI,KAAC,AAAQ,UAAE;AAClB,AAAI,qBAAC,AAAS,YAAG,AAAI;AACrB,AAAI,qBAAC,AAAW,YAAC,AAAC,GAAE,AAAI,AAAC;AACzB,AAAI,qBAAC,AAAK,MAAC,AAAQ,UAAE,AAAI,KAAC,AAAa,AAAC;AACzC,AACH;AAAC;AACD,AAAW,0CAAE,AAAC;AACZ,AAAM,gBADQ,AAAU,iFAAG,AAAK;;kCACC,AAAI,KAAC,AAAc,eAAC,AAAC,AAAC;gBAA/C,AAAK;gBAAE,AAAa,AAAE;;AAE9B,gBAAI,AAAa,eAAE;AACjB,oBAAI,AAAU,YAAE,AAAI,KAAC,AAAW,cAAG,AAAI,KAAC,AAAsB,uBAAC,AAAI,KAAC,AAAa,eAAE,AAAK,AAAC;AAEzF,AAAI,qBAAC,AAAgB,iBAAC,AAAK,AAAC;AAC7B,AACH;AAAC;AACD,AAAS,sCAAE,AAAC;AACV,gBAAM,AAAK,QAAG,AAAI,KAAC,AAAY,aAAC,AAAC,GAAE,AAAI,KAAC,AAAa,cAAC,AAAI,KAAC,AAAW,AAAC,AAAC;AAExE,gBAAI,AAAK,SAAI,AAAI,MAAE,AAAM;AAEzB,AAAI,iBAAC,AAAgB,iBAAC,AAAK,AAAC,AAC9B;AAAC;AACD,AAAgB,oDAAE,AAAK;;;AACrB,AAAI,iBAAC,AAAa,qBAAQ,AAAa,cAAC,AAAG,IAAC,UAAC,AAAC,GAAE,AAAC,AAAE,AAAE;AACnD,oBAAI,AAAC,MAAK,AAAI,OAAC,AAAW,aAAE,OAAO,AAAK,WACnC,OAAO,AAAM,OAAC,AAAC,AAAC,AACvB;AAAC,AAAC,AACJ,aAJuB,AAAI;AAI1B,AACF,AACF;AApEU;AA1EI,GAXf,AAAS","sourcesContent":["// Styles\nimport '../../stylus/components/_range-sliders.styl'\n\n// Extensions\nimport VSlider from '../VSlider'\n\nimport {\n  createRange,\n  deepEqual\n} from '../../util/helpers'\n\nexport default {\n  name: 'v-range-slider',\n\n  extends: VSlider,\n\n  data: vm => ({\n    activeThumb: null,\n    lazyValue: !vm.value.length\n      ? [0, 0]\n      : vm.value\n  }),\n\n  props: {\n    value: {\n      type: Array,\n      default: () => ([])\n    }\n  },\n\n  computed: {\n    classes () {\n      return Object.assign({}, {\n        'v-input--range-slider': true\n      }, VSlider.computed.classes.call(this))\n    },\n    internalValue: {\n      get () {\n        return this.lazyValue\n      },\n      set (val) {\n        const { min, max } = this\n        // Round value to ensure the\n        // entire slider range can\n        // be selected with step\n        let value = val.map(v => this.roundValue(Math.min(Math.max(v, min), max)))\n\n        // Switch values if range and wrong order\n        if (value[0] > value[1] || value[1] < value[0]) {\n          if (this.activeThumb !== null) this.activeThumb = this.activeThumb === 1 ? 0 : 1\n          value = [value[1], value[0]]\n        }\n\n        this.lazyValue = value\n        if (!deepEqual(value, this.value)) this.$emit('input', value)\n\n        this.validate()\n      }\n    },\n    inputWidth () {\n      return this.internalValue.map(v => (\n        this.roundValue(v) - this.min) / (this.max - this.min) * 100\n      )\n    },\n    isDirty () {\n      return this.internalValue.some(v => v !== this.min) || this.alwaysDirty\n    },\n    trackFillStyles () {\n      const styles = VSlider.computed.trackFillStyles.call(this)\n      const fillPercent = Math.abs(this.inputWidth[0] - this.inputWidth[1])\n\n      styles.width = `calc(${fillPercent}% - ${this.trackPadding}px)`\n      styles[this.$vuetify.rtl ? 'right' : 'left'] = `${this.inputWidth[0]}%`\n\n      return styles\n    },\n    trackPadding () {\n      if (this.isDirty ||\n        this.internalValue[0]\n      ) return 0\n\n      return VSlider.computed.trackPadding.call(this)\n    }\n  },\n\n  methods: {\n    getIndexOfClosestValue (arr, v) {\n      if (Math.abs(arr[0] - v) < Math.abs(arr[1] - v)) return 0\n      else return 1\n    },\n    genInput () {\n      return createRange(2).map(i => {\n        const input = VSlider.methods.genInput.call(this)\n\n        input.data.attrs.value = this.internalValue[i]\n\n        input.data.on.focus = e => {\n          this.activeThumb = i\n          VSlider.methods.onFocus.call(this, e)\n        }\n\n        return input\n      })\n    },\n    genChildren () {\n      return [\n        this.genInput(),\n        this.genTrackContainer(),\n        this.genSteps(),\n        createRange(2).map(i => {\n          const value = this.internalValue[i]\n          const onDrag = e => {\n            this.isActive = true\n            this.activeThumb = i\n            this.onThumbMouseDown(e)\n          }\n          const valueWidth = this.inputWidth[i]\n          const isActive = (this.isFocused || this.isActive) && this.activeThumb === i\n\n          return this.genThumbContainer(value, valueWidth, isActive, onDrag)\n        })\n      ]\n    },\n    onSliderClick (e) {\n      if (!this.isActive) {\n        this.isFocused = true\n        this.onMouseMove(e, true)\n        this.$emit('change', this.internalValue)\n      }\n    },\n    onMouseMove (e, trackClick = false) {\n      const { value, isInsideTrack } = this.parseMouseMove(e)\n\n      if (isInsideTrack) {\n        if (trackClick) this.activeThumb = this.getIndexOfClosestValue(this.internalValue, value)\n\n        this.setInternalValue(value)\n      }\n    },\n    onKeyDown (e) {\n      const value = this.parseKeyDown(e, this.internalValue[this.activeThumb])\n\n      if (value == null) return\n\n      this.setInternalValue(value)\n    },\n    setInternalValue (value) {\n      this.internalValue = this.internalValue.map((v, i) => {\n        if (i === this.activeThumb) return value\n        else return Number(v)\n      })\n    }\n  }\n}\n"]}