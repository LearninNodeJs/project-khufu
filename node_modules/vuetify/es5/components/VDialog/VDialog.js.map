{"version":3,"file":"VDialog.js","sourceRoot":"","sources":["../../../src/components/VDialog/VDialog.js"],"names":[],"mappings":";;;;;;AAAA,AAAO,AAAuC;;AAG9C,AAAO,AAAS,AAAM,AAAwB;;;;AAC9C,AAAO,AAAU,AAAM,AAAyB;;;;AAChD,AAAO,AAAW,AAAM,AAA0B;;;;AAClD,AAAO,AAAU,AAAM,AAAyB;;;;AAChD,AAAO,AAAS,AAAM,AAAwB;;;;AAC9C,AAAO,AAAU,AAAM,AAAyB;;;;AAGhD,AAAO,AAAY,AAAM,AAAgC;;;;AAGzD,AAAO,AAAE,AAAS,AAAE,AAAM,AAAoB,AAE9C;;;;;AAdA,AAAS;;AAQT,AAAa;;AAGb,AAAU;;;;AAIR,AAAI,UAAE,AAAU;AAEhB,AAAM,YAAE,AACN,AAAS,AACT,AAAU,AACV,AAAW,AACX,AAAU,AACV,AAAS,AACT,AAAU,AACX;AAED,AAAU;AACR,AAAY,AACb;AAFW;AAIZ,AAAI;AACF;AACE,AAAO,qBAAE,AAAK;AACd,AAAc,4BAAE,AAAI;AACpB,AAAW,yBAAE,AAAK;AAClB,AAAU,wBAAE,AAA2B;AACvC,AAAc,4BAAE,AAAG,AACpB,AACH;AAPS;AAOR;;AAED,AAAK;AACH,AAAQ,kBAAE,AAAO;AACjB,AAAU,oBAAE,AAAO;AACnB,AAAU,oBAAE,AAAO;AACnB,AAAS,mBAAE,AAAO;AAClB,AAAgB,0BAAE,AAAO;AACzB,AAAQ;AACN,AAAI,kBAAE,CAAC,AAAM,QAAE,AAAM,AAAC;AACtB,AAAO,qBAAE,AAAM,AAChB;AAHS;AAIV,AAAM;AACJ,AAAI,kBAAE,AAAM;AACZ,AAAO,qBAAE,AAAe,AACzB;AAHO;AAIR,AAAK;AACH,AAAI,kBAAE,CAAC,AAAM,QAAE,AAAM,AAAC;AACtB,AAAO,qBAAE,AAAM,AAChB;AAHM;AAIP,AAAU,oBAAE,AAAO;AACnB,AAAU;AACR,AAAI,kBAAE,CAAC,AAAM,QAAE,AAAO,AAAC;AACvB,AAAO,qBAAE,AAAmB,AAC7B,AACF;AAJa;AAnBP;AAyBP,AAAQ;AACN,AAAO;;;AACL,AAAO,AACL,oDAAC,AAAC,eAAY,AAAI,KAAC,AAAY,AAAE,AAAC,cAAC,AAAI,AAAE,AAAC,QAAE,AAAI,6BAChD,AAAkB,oBAAE,AAAI,KAAC,AAAQ,iCACjC,AAAsB,wBAAE,AAAI,KAAC,AAAU,mCACvC,AAAsB,wBAAE,AAAI,KAAC,AAAU,mCACvC,AAAsB,wBAAE,AAAI,KAAC,AAAU,mCACvC,AAAoB,sBAAE,AAAI,KAAC,AAAO,AACnC,AACH;AAAC;AACD,AAAc;AACZ;AACE,AAAmB,qCAAE,AAAI;AACzB,AAA2B,6CAAE,AAAI,KAAC,AAAQ,AAC3C,AACH;AAJS;AAIR,AACF;AAjBS;AAmBV,AAAK;AACH,AAAQ,oCAAE,AAAG;AACX,gBAAI,AAAG,KAAE;AACP,AAAI,qBAAC,AAAI,AAAE;AACZ,mBAAM;AACL,AAAI,qBAAC,AAAa,AAAE;AACpB,AAAI,qBAAC,AAAM,AAAE;AACd,AACH;AAAC,AACF;AATM;AAWP,AAAO;AACL,AAAI,aAAC,AAAQ,WAAG,AAAI,KAAC,AAAQ;AAC7B,AAAI,aAAC,AAAQ,YAAI,AAAI,KAAC,AAAI,AAAE,AAC9B;AAAC;AAED,AAAa;AACX,YAAI,OAAO,AAAM,WAAK,AAAW,aAAE,AAAI,KAAC,AAAM,AAAE,AAClD;AAAC;;AAED,AAAO;AACL,AAAY;;;AACV,AAAI,iBAAC,AAAO,UAAG,AAAK;AACpB,AAAqC;AACrC,AAAwB;AACxB,AAAI,iBAAC,AAAS,UAAC,AAAG,AAAE;AAClB,AAAI,sBAAC,AAAO,UAAG,AAAI;AACnB,AAAY,6BAAC,AAAI,MAAC,AAAc,AAAC;AACjC,AAAI,sBAAC,AAAc;AAAc,AAAG,AAAE,AAAC,2BAAC,AAAI,MAAC,AAAO,UAAG,AAAK,AAAC;iBAAvC,AAAU,EAA+B,AAAG,AAAC,AACrE;AAAC,AAAC,AACJ;AAAC;AACD,AAAgB,oDAAE,AAAC;AACjB,AAAiC;AACjC,AAA6B;AAC7B,AAAuB;AACvB,gBAAI,AAAI,KAAC,AAAK,MAAC,AAAO,QAAC,AAAQ,SAAC,AAAC,EAAC,AAAM,AAAC,WACvC,CAAC,AAAI,KAAC,AAAQ,UACd,OAAO,AAAK;AAEd,AAA2C;AAC3C,AAAwC;AACxC,AAAU;AACV,gBAAI,AAAI,KAAC,AAAU,YAAE;AACnB,iBAAC,AAAI,KAAC,AAAgB,oBAAI,AAAI,KAAC,AAAY,AAAE;AAE7C,uBAAO,AAAK;AACb;AAED,AAA6E;AAC7E,AAAyG;AACzG,mBAAO,AAAS,wBAAC,AAAI,KAAC,AAAK,MAAC,AAAO,AAAC,YAAI,AAAI,KAAC,AAAY,AAAE,AAC7D;AAAC;AACD,AAAI;AACF,aAAC,AAAI,KAAC,AAAU,cAAI,CAAC,AAAI,KAAC,AAAW,eAAI,AAAI,KAAC,AAAU,AAAE;AAC1D,AAAI,iBAAC,AAAU,cAAI,AAAI,KAAC,AAAU,AAAE;AACpC,AAAI,iBAAC,AAAK,MAAC,AAAO,QAAC,AAAK,AAAE;AAC1B,AAAI,iBAAC,AAAU,WAAC,AAAO,WAAI,AAAI,KAAC,AAAI,AAAE,AACxC;AAAC;AACD,AAAI;AACF,AAAM,mBAAC,AAAgB,iBAAC,AAAS,WAAE,AAAI,KAAC,AAAS,AAAC,AACpD;AAAC;AACD,AAAM;AACJ,AAAM,mBAAC,AAAmB,oBAAC,AAAS,WAAE,AAAI,KAAC,AAAS,AAAC,AACvD;AAAC;AACD,AAAS,sCAAE,AAAC;AACV,AAAI,iBAAC,AAAK,MAAC,AAAS,WAAE,AAAC,AAAC,AAC1B;AAAC,AACF;AA/CQ;AAiDT,AAAM,4BAAE,AAAC;;;AACP,YAAM,AAAQ,WAAG,AAAE;AACnB,YAAM,AAAI;AACR,AAAO,qBAAE,AAAI,KAAC,AAAO;AACrB,AAAG,iBAAE,AAAQ;AACb,AAAU;AAEN,AAAI,sBAAE,AAAe;AACrB,AAAK;AAAE,AAAG,AAAE,AAAC,2BAAC,AAAI,OAAC,AAAQ,WAAG,AAAK,AAAC;;AACpC,AAAI;AACF,AAAgB,sCAAE,AAAI,KAAC,AAAgB;AACvC,AAAO,6BAAE,AAAI,KAAC,AAAwB,AACvC,AACF;AAJO;AAHR,aADU,EASV,EAAE,AAAI,MAAE,AAAM,QAAE,AAAK,OAAE,AAAI,KAAC,AAAQ,AAAE,AACvC;AACD,AAAE;AACA,AAAK,uBAAE,AAAC,AAAC,AAAE;AAAG,AAAC,sBAAC,AAAe,AAAE,AAAC;AAAC,AACpC,AACF;AAHK;AAdO;AAmBb,YAAI,CAAC,AAAI,KAAC,AAAU,YAAE;AACpB,AAAI,iBAAC,AAAK;AACR,AAAQ,0BAAE,AAAI,KAAC,AAAQ,aAAK,AAAM,AAAC,AAAC,SAAC,AAAS,AAAC,AAAC,AAAC,YAAC,AAAK,MAAC,AAAI,KAAC,AAAQ,AAAC,AAAC,AAAC,YAAC,AAAI,KAAC,AAAQ,AAAC,AAAC,AAAC,WAAG,AAAI,KAAC,AAAQ,AAAI,AAAC;AAC9G,AAAK,uBAAE,AAAI,KAAC,AAAK,UAAK,AAAM,AAAC,AAAC,SAAC,AAAS,AAAC,AAAC,AAAC,YAAC,AAAK,MAAC,AAAI,KAAC,AAAK,AAAC,AAAC,AAAC,SAAC,AAAI,KAAC,AAAK,AAAC,AAAC,AAAC,QAAG,AAAI,KAAC,AAAK,AAAI,AAAC,AAChG;AAHY;AAId;AAED,YAAI,AAAI,KAAC,AAAM,OAAC,AAAS,WAAE;AACzB,AAAQ,qBAAC,AAAI,OAAG,AAAK;AACnB,AAAO,yBAAE,AAAqB;AAC9B,AAAE;AACA,AAAK,2BAAE,AAAC,AAAC,AAAE;AACT,AAAC,0BAAC,AAAe,AAAE;AACnB,4BAAI,CAAC,AAAI,OAAC,AAAQ,UAAE,AAAI,OAAC,AAAQ,WAAG,CAAC,AAAI,OAAC,AAAQ,AACpD;AAAC,AACF,AACF;AANK;AAFiB,aAAT,AAAC,EAQZ,CAAC,AAAI,KAAC,AAAM,OAAC,AAAS,AAAC,AAAC,AAAC;AAC7B;AAED,YAAI,AAAM,SAAG,AAAC,EAAC,AAAK,OAAE,AAAI,MAAE,AAAI,KAAC,AAAe,gBAAC,AAAI,KAAC,AAAM,OAAC,AAAO,AAAC,AAAC;AACtE,YAAI,AAAI,KAAC,AAAU,YAAE;AACnB,AAAM,uBAAK,AAAY;AACrB,AAAK;AACH,AAAI,0BAAE,AAAI,KAAC,AAAU;AACrB,AAAM,4BAAE,AAAI,KAAC,AAAM,AACpB,AACF;AAJQ;AADgB,aAAhB,AAAC,EAKP,CAAC,AAAM,AAAC,AAAC;AACb;AAED,AAAQ,iBAAC,AAAI,OAAG,AAAK;AACnB,AAAO,qBAAE,AAAI,KAAC,AAAc;AAC5B,AAAQ,sBAAE,EAAE,AAAQ,UAAE,CAAC,AAAC,AAAE;AAC1B,AAAK,mBAAE,EAAE,AAAM,QAAE,AAAI,KAAC,AAAY,AAAE;AACpC,AAAG,iBAAE,AAAS,AACf;AALsB,SAAT,AAAC,EAKZ,CAAC,AAAM,AAAC,AAAC,AAAC;AAEb,iBAAS,AAAK;AACZ,AAAW,yBAAE,AAAqB;AAClC,AAAK;AACH,AAAO,yBAAG,CAAC,AAAI,KAAC,AAAM,OAAC,AAAS,aAAI,AAAI,KAAC,AAAS,AAAC,AAAC,AAAC,SAA5C,GAA6C,AAAO,AAAC,AAAC,UAAC,AAAc,AAC/E,AACF;AAHQ;AAFO,SAAT,AAAC,EAKL,AAAQ,AAAC,AACd;AAAC,AACF;AA3Mc","sourcesContent":["import '../../stylus/components/_dialogs.styl'\n\n// Mixins\nimport Dependent from '../../mixins/dependent'\nimport Detachable from '../../mixins/detachable'\nimport Overlayable from '../../mixins/overlayable'\nimport Returnable from '../../mixins/returnable'\nimport Stackable from '../../mixins/stackable'\nimport Toggleable from '../../mixins/toggleable'\n\n// Directives\nimport ClickOutside from '../../directives/click-outside'\n\n// Helpers\nimport { getZIndex } from '../../util/helpers'\n\nexport default {\n  name: 'v-dialog',\n\n  mixins: [\n    Dependent,\n    Detachable,\n    Overlayable,\n    Returnable,\n    Stackable,\n    Toggleable\n  ],\n\n  directives: {\n    ClickOutside\n  },\n\n  data () {\n    return {\n      animate: false,\n      animateTimeout: null,\n      isDependent: false,\n      stackClass: 'v-dialog__content__active',\n      stackMinZIndex: 200\n    }\n  },\n\n  props: {\n    disabled: Boolean,\n    persistent: Boolean,\n    fullscreen: Boolean,\n    fullWidth: Boolean,\n    noClickAnimation: Boolean,\n    maxWidth: {\n      type: [String, Number],\n      default: 'none'\n    },\n    origin: {\n      type: String,\n      default: 'center center'\n    },\n    width: {\n      type: [String, Number],\n      default: 'auto'\n    },\n    scrollable: Boolean,\n    transition: {\n      type: [String, Boolean],\n      default: 'dialog-transition'\n    }\n  },\n\n  computed: {\n    classes () {\n      return {\n        [(`v-dialog ${this.contentClass}`).trim()]: true,\n        'v-dialog--active': this.isActive,\n        'v-dialog--persistent': this.persistent,\n        'v-dialog--fullscreen': this.fullscreen,\n        'v-dialog--scrollable': this.scrollable,\n        'v-dialog--animated': this.animate\n      }\n    },\n    contentClasses () {\n      return {\n        'v-dialog__content': true,\n        'v-dialog__content--active': this.isActive\n      }\n    }\n  },\n\n  watch: {\n    isActive (val) {\n      if (val) {\n        this.show()\n      } else {\n        this.removeOverlay()\n        this.unbind()\n      }\n    }\n  },\n\n  mounted () {\n    this.isBooted = this.isActive\n    this.isActive && this.show()\n  },\n\n  beforeDestroy () {\n    if (typeof window !== 'undefined') this.unbind()\n  },\n\n  methods: {\n    animateClick () {\n      this.animate = false\n      // Needed for when clicking very fast\n      // outside of the dialog\n      this.$nextTick(() => {\n        this.animate = true\n        clearTimeout(this.animateTimeout)\n        this.animateTimeout = setTimeout(() => (this.animate = false), 150)\n      })\n    },\n    closeConditional (e) {\n      // If the dialog content contains\n      // the click event, or if the\n      // dialog is not active\n      if (this.$refs.content.contains(e.target) ||\n        !this.isActive\n      ) return false\n\n      // If we made it here, the click is outside\n      // and is active. If persistent, animate\n      // content\n      if (this.persistent) {\n        !this.noClickAnimation && this.animateClick()\n\n        return false\n      }\n\n      // close dialog if !persistent, clicked outside and we're the topmost dialog.\n      // Since this should only be called in a capture event (bottom up), we shouldn't need to stop propagation\n      return getZIndex(this.$refs.content) >= this.getMaxZIndex()\n    },\n    show () {\n      !this.fullscreen && !this.hideOverlay && this.genOverlay()\n      this.fullscreen && this.hideScroll()\n      this.$refs.content.focus()\n      this.$listeners.keydown && this.bind()\n    },\n    bind () {\n      window.addEventListener('keydown', this.onKeydown)\n    },\n    unbind () {\n      window.removeEventListener('keydown', this.onKeydown)\n    },\n    onKeydown (e) {\n      this.$emit('keydown', e)\n    }\n  },\n\n  render (h) {\n    const children = []\n    const data = {\n      'class': this.classes,\n      ref: 'dialog',\n      directives: [\n        {\n          name: 'click-outside',\n          value: () => (this.isActive = false),\n          args: {\n            closeConditional: this.closeConditional,\n            include: this.getOpenDependentElements\n          }\n        },\n        { name: 'show', value: this.isActive }\n      ],\n      on: {\n        click: e => { e.stopPropagation() }\n      }\n    }\n\n    if (!this.fullscreen) {\n      data.style = {\n        maxWidth: this.maxWidth === 'none' ? undefined : (isNaN(this.maxWidth) ? this.maxWidth : `${this.maxWidth}px`),\n        width: this.width === 'auto' ? undefined : (isNaN(this.width) ? this.width : `${this.width}px`)\n      }\n    }\n\n    if (this.$slots.activator) {\n      children.push(h('div', {\n        'class': 'v-dialog__activator',\n        on: {\n          click: e => {\n            e.stopPropagation()\n            if (!this.disabled) this.isActive = !this.isActive\n          }\n        }\n      }, [this.$slots.activator]))\n    }\n\n    let dialog = h('div', data, this.showLazyContent(this.$slots.default))\n    if (this.transition) {\n      dialog = h('transition', {\n        props: {\n          name: this.transition,\n          origin: this.origin\n        }\n      }, [dialog])\n    }\n\n    children.push(h('div', {\n      'class': this.contentClasses,\n      domProps: { tabIndex: -1 },\n      style: { zIndex: this.activeZIndex },\n      ref: 'content'\n    }, [dialog]))\n\n    return h('div', {\n      staticClass: 'v-dialog__container',\n      style: {\n        display: (!this.$slots.activator || this.fullWidth) ? 'block' : 'inline-block'\n      }\n    }, children)\n  }\n}\n"]}