{"version":3,"file":"VTabs.js","sourceRoot":"","sources":["../../../src/components/VTabs/VTabs.js"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport '../../stylus/components/_tabs.styl'\n\n// Component level mixins\nimport TabsComputed from './mixins/tabs-computed'\nimport TabsGenerators from './mixins/tabs-generators'\nimport TabsProps from './mixins/tabs-props'\nimport TabsTouch from './mixins/tabs-touch'\nimport TabsWatchers from './mixins/tabs-watchers'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport SSRBootable from '../../mixins/ssr-bootable'\nimport Themeable from '../../mixins/themeable'\nimport {\n  provide as RegistrableProvide\n} from '../../mixins/registrable'\n\n// Directives\nimport Resize from '../../directives/resize'\nimport Touch from '../../directives/touch'\n\nexport default {\n  name: 'v-tabs',\n\n  mixins: [\n    RegistrableProvide('tabs'),\n    Colorable,\n    SSRBootable,\n    TabsComputed,\n    TabsProps,\n    TabsGenerators,\n    TabsTouch,\n    TabsWatchers,\n    Themeable\n  ],\n\n  directives: {\n    Resize,\n    Touch\n  },\n\n  provide () {\n    return {\n      tabClick: this.tabClick,\n      tabProxy: this.tabProxy,\n      registerItems: this.registerItems,\n      unregisterItems: this.unregisterItems\n    }\n  },\n\n  data () {\n    return {\n      bar: [],\n      content: [],\n      isBooted: false,\n      isOverflowing: false,\n      lazyValue: this.value,\n      nextIconVisible: false,\n      prevIconVisible: false,\n      resizeTimeout: null,\n      reverse: false,\n      scrollOffset: 0,\n      sliderWidth: null,\n      sliderLeft: null,\n      startX: 0,\n      tabsContainer: null,\n      tabs: [],\n      tabItems: null,\n      transitionTime: 300,\n      widths: {\n        bar: 0,\n        container: 0,\n        wrapper: 0\n      }\n    }\n  },\n\n  watch: {\n    tabs: 'onResize'\n  },\n\n  mounted () {\n    this.checkIcons()\n  },\n\n  methods: {\n    checkIcons () {\n      this.prevIconVisible = this.checkPrevIcon()\n      this.nextIconVisible = this.checkNextIcon()\n    },\n    checkPrevIcon () {\n      return this.scrollOffset > 0\n    },\n    checkNextIcon () {\n      // Check one scroll ahead to know the width of right-most item\n      return this.widths.container > this.scrollOffset + this.widths.wrapper\n    },\n    callSlider () {\n      if (this.hideSlider || !this.activeTab) return false\n\n      // Give screen time to paint\n      const action = (this.activeTab || {}).action\n      const activeTab = action === this.activeTab\n        ? this.activeTab\n        : this.tabs.find(tab => tab.action === action)\n\n      this.$nextTick(() => {\n        if (!activeTab || !activeTab.$el) return\n        this.sliderWidth = activeTab.$el.scrollWidth\n        this.sliderLeft = activeTab.$el.offsetLeft\n      })\n    },\n    /**\n     * When v-navigation-drawer changes the\n     * width of the container, call resize\n     * after the transition is complete\n     */\n    onResize () {\n      if (this._isDestroyed) return\n\n      this.setWidths()\n\n      clearTimeout(this.resizeTimeout)\n      this.resizeTimeout = setTimeout(() => {\n        this.callSlider()\n        this.scrollIntoView()\n        this.checkIcons()\n      }, this.transitionTime)\n    },\n    overflowCheck (e, fn) {\n      this.isOverflowing && fn(e)\n    },\n    scrollTo (direction) {\n      this.scrollOffset = this.newOffset(direction)\n    },\n    setOverflow () {\n      this.isOverflowing = this.widths.bar < this.widths.container\n    },\n    setWidths () {\n      const bar = this.$refs.bar ? this.$refs.bar.clientWidth : 0\n      const container = this.$refs.container ? this.$refs.container.clientWidth : 0\n      const wrapper = this.$refs.wrapper ? this.$refs.wrapper.clientWidth : 0\n\n      this.widths = { bar, container, wrapper }\n\n      this.setOverflow()\n    },\n    findActiveLink () {\n      if (!this.tabs.length || this.lazyValue) return\n\n      const activeIndex = this.tabs.findIndex((tabItem, index) => {\n        const id = tabItem.action === tabItem ? index.toString() : tabItem.action\n        return id === this.lazyValue ||\n          tabItem.$el.firstChild.className.indexOf(this.activeClass) > -1\n      })\n\n      const index = activeIndex > -1 ? activeIndex : 0\n      const tab = this.tabs[index]\n\n      /* istanbul ignore next */\n      // There is not a reliable way to test\n      this.inputValue = tab.action === tab ? index : tab.action\n    },\n    parseNodes () {\n      const item = []\n      const items = []\n      const slider = []\n      const tab = []\n      const length = (this.$slots.default || []).length\n\n      for (let i = 0; i < length; i++) {\n        const vnode = this.$slots.default[i]\n\n        if (vnode.componentOptions) {\n          switch (vnode.componentOptions.Ctor.options.name) {\n            case 'v-tabs-slider': slider.push(vnode)\n              break\n            case 'v-tabs-items': items.push(vnode)\n              break\n            case 'v-tab-item': item.push(vnode)\n              break\n            // case 'v-tab' - intentionally omitted\n            default: tab.push(vnode)\n          }\n        } else {\n          tab.push(vnode)\n        }\n      }\n\n      return { tab, slider, items, item }\n    },\n    register (options) {\n      this.tabs.push(options)\n    },\n    scrollIntoView () {\n      if (!this.activeTab) return\n      if (!this.isOverflowing) return (this.scrollOffset = 0)\n\n      const totalWidth = this.widths.wrapper + this.scrollOffset\n      const { clientWidth, offsetLeft } = this.activeTab.$el\n      const itemOffset = clientWidth + offsetLeft\n      const additionalOffset = clientWidth * 0.3\n\n      /* istanbul ignore else */\n      if (offsetLeft < this.scrollOffset) {\n        this.scrollOffset = Math.max(offsetLeft - additionalOffset, 0)\n      } else if (totalWidth < itemOffset) {\n        this.scrollOffset -= totalWidth - itemOffset - additionalOffset\n      }\n    },\n    tabClick (tab) {\n      this.inputValue = tab.action === tab ? this.tabs.indexOf(tab) : tab.action\n      this.scrollIntoView()\n    },\n    tabProxy (val) {\n      this.lazyValue = val\n    },\n    registerItems (fn) {\n      this.tabItems = fn\n    },\n    unregisterItems () {\n      this.tabItems = null\n    },\n    unregister (tab) {\n      this.tabs = this.tabs.filter(o => o !== tab)\n    },\n    updateTabs () {\n      for (let index = this.tabs.length; --index >= 0;) {\n        this.tabs[index].toggle(this.target)\n      }\n\n      this.setOverflow()\n    }\n  },\n\n  render (h) {\n    const { tab, slider, items, item } = this.parseNodes()\n\n    return h('div', {\n      staticClass: 'v-tabs',\n      directives: [{\n        name: 'resize',\n        arg: 400,\n        modifiers: { quiet: true },\n        value: this.onResize\n      }]\n    }, [\n      this.genBar([this.hideSlider ? null : this.genSlider(slider), tab]),\n      this.genItems(items, item)\n    ])\n  }\n}\n"]}