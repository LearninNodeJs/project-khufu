{"version":3,"file":"detachable.js","sourceRoot":"","sources":["../../src/mixins/detachable.js"],"names":[],"mappings":";;;;;;;;AAAA,AAAO,AAAQ,AAAM,AAAY;;;;AACjC,AAAO,AAAE,AAAW,AAAE,AAAM,AAAiB;;;;AAE7C,8BAA+B,AAAG;AAChC,QAAM,AAAI,AAAG,cAAO,AAAG;AAEvB,QAAI,AAAI,SAAK,AAAS,aAAI,AAAI,SAAK,AAAQ,UAAE,OAAO,AAAI;AAExD,WAAO,AAAG,IAAC,AAAQ,aAAK,AAAI,KAAC,AAAY,AAC3C;AAAC,AAED;;AACE,AAAI,UAAE,AAAY;AAElB,AAAM,YAAE,AAAC,AAAQ,AAAC;AAElB,AAAI;AAAE,AAAG,AAAE,AAAC;AACV,AAAW,yBAAE,AAAK,AACnB,AAAC;AAFW;;AAIb,AAAK;AACH,AAAM;AACJ,AAAI,kBAAE,AAAI;AACV,AAAO,qBAAE,AAAK;AACd,AAAS,uBAAE,AAAoB,AAChC;AAJO;AAKR,AAAY;AACV,AAAO,qBAAE,AAAE,AACZ,AACF;AAHe;AANT;AAWP,AAAK;AACH,AAAM;AACJ,AAAI,iBAAC,AAAW,cAAG,AAAK;AACxB,AAAI,iBAAC,AAAU,AAAE,AACnB;AAAC;;AACD,AAAU,oBAAE,AAAY,AACzB;AANM;AAQP,AAAO;AACL,SAAC,AAAI,KAAC,AAAI,QAAI,AAAI,KAAC,AAAU,AAAE,AACjC;AAAC;AAED,AAAW;AACT,AAAI,aAAC,AAAQ,WAAG,AAAK,AACvB;AAAC;AAED,AAAa;AACX,YAAI,CAAC,AAAI,KAAC,AAAK,MAAC,AAAO,SAAE,AAAM;AAE/B,AAAW;AACX,YAAI;AACF,AAAI,iBAAC,AAAK,MAAC,AAAO,QAAC,AAAU,WAAC,AAAW,YAAC,AAAI,KAAC,AAAK,MAAC,AAAO,AAAC;AAC9D,UAAC,OAAO,AAAC,GAAE;AAAE,AAAO,oBAAC,AAAG,IAAC,AAAC,AAAC;AAAE,AAChC;AAAC;;AAED,AAAO;AACL,AAAU;AACR,gBAAI,AAAI,KAAC,AAAY,gBACnB,CAAC,AAAI,KAAC,AAAK,MAAC,AAAO,WACnB,AAAI,KAAC,AAAW;AAChB,AAAkC;AAClC,AAAiC;AACjC,AAAI,iBAAC,AAAM,WAAK,AAAE,MAAI,AAA8C;AACpE,AAAI,iBAAC,AAAM,WAAK,AAAI,QAAI,AAAkD;AAC1E,AAAI,iBAAC,AAAM,WAAK,AAAQ,SAAC,AAAmD;cAC5E,AAAM;AAER,gBAAI,AAAM;AACV,gBAAI,AAAI,KAAC,AAAM,WAAK,AAAK,OAAE;AACzB,AAAyB;AACzB,AAAM,yBAAG,AAAQ,SAAC,AAAa,cAAC,AAAY,AAAC;AAC9C,uBAAU,OAAO,AAAI,KAAC,AAAM,WAAK,AAAQ,UAAE;AAC1C,AAAe;AACf,AAAM,yBAAG,AAAQ,SAAC,AAAa,cAAC,AAAI,KAAC,AAAM,AAAC;AAC7C,aAHM,MAGA;AACL,AAAc;AACd,AAAM,yBAAG,AAAI,KAAC,AAAM;AACrB;AAED,gBAAI,CAAC,AAAM,QAAE;AACX,AAAW,AAAC,wEAA2B,AAAI,KAAC,AAAM,UAAI,AAAY,AAAE,eAAE,AAAI,AAAC;AAC3E,AAAM;AACP;AAED,AAAM,mBAAC,AAAY,aACjB,AAAI,KAAC,AAAK,MAAC,AAAO,SAClB,AAAM,OAAC,AAAU,AAClB;AAED,AAAI,iBAAC,AAAW,cAAG,AAAI,AACzB;AAAC,AACF,AACF;AArCU;AA7CI","sourcesContent":["import Bootable from './bootable'\nimport { consoleWarn } from '../util/console'\n\nfunction validateAttachTarget (val) {\n  const type = typeof val\n\n  if (type === 'boolean' || type === 'string') return true\n\n  return val.nodeType === Node.ELEMENT_NODE\n}\n\nexport default {\n  name: 'detachable',\n\n  mixins: [Bootable],\n\n  data: () => ({\n    hasDetached: false\n  }),\n\n  props: {\n    attach: {\n      type: null,\n      default: false,\n      validator: validateAttachTarget\n    },\n    contentClass: {\n      default: ''\n    }\n  },\n\n  watch: {\n    attach () {\n      this.hasDetached = false\n      this.initDetach()\n    },\n    hasContent: 'initDetach'\n  },\n\n  mounted () {\n    !this.lazy && this.initDetach()\n  },\n\n  deactivated () {\n    this.isActive = false\n  },\n\n  beforeDestroy () {\n    if (!this.$refs.content) return\n\n    // IE11 Fix\n    try {\n      this.$refs.content.parentNode.removeChild(this.$refs.content)\n    } catch (e) { console.log(e) }\n  },\n\n  methods: {\n    initDetach () {\n      if (this._isDestroyed ||\n        !this.$refs.content ||\n        this.hasDetached ||\n        // Leave menu in place if attached\n        // and dev has not changed target\n        this.attach === '' || // If used as a boolean prop (<v-menu attach>)\n        this.attach === true || // If bound to a boolean (<v-menu :attach=\"true\">)\n        this.attach === 'attach' // If bound as boolean prop in pug (v-menu(attach))\n      ) return\n\n      let target\n      if (this.attach === false) {\n        // Default, detach to app\n        target = document.querySelector('[data-app]')\n      } else if (typeof this.attach === 'string') {\n        // CSS selector\n        target = document.querySelector(this.attach)\n      } else {\n        // DOM Element\n        target = this.attach\n      }\n\n      if (!target) {\n        consoleWarn(`Unable to locate target ${this.attach || '[data-app]'}`, this)\n        return\n      }\n\n      target.insertBefore(\n        this.$refs.content,\n        target.firstChild\n      )\n\n      this.hasDetached = true\n    }\n  }\n}\n"]}